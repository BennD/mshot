name: tools
description: Install tools

inputs:
  modify_cache:
    description: 'Installs required build tools and updates cache'
    required: true
  rust:
    description: 'Rust toolchain'
    required: true
  github_token:
    description: 'GitHub token'
    required: true

runs:
  using: "composite"

  steps:
    # Ensure that ~/.local
    - name: Ensure that ~/.local
      shell: bash
      run: |
        mkdir -p ~/.local

    # Install rust
    - name: Install rust ${{ inputs.rust }}
      uses: ./.github/actions/tools/rust
      with:
        rust: ${{ inputs.rust }}
        modify_cache: ${{ inputs.modify_cache }}

    # Install protoc
    - name: Install protoc
      uses: ./.github/actions/tools/protoc
      with:
        github_token: ${{ inputs.github_token }}
        modify_cache: ${{ inputs.modify_cache }}
